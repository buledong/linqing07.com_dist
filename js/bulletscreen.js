var Bulletscreen=function(){function t(t,e){var n=e-t+1;return Math.floor(Math.random()*n+t)}function e(){var t=["#f58d4e","#f04951","#e966ac","#b968ad","#8869ad","#3676b6","#33a7d8","#33b8a3","#a3fd39","#fff534","#fdcf3e"],e=Math.floor(Math.random()*t.length);return t[e]}var n=this,l=$("#bullet"),o=[];this.init=function(){n.getData(),$("<strong/>",{id:"toggleBullet",text:"关闭弹幕",click:function(){$(this).hasClass("closed")?n.getData():n.close()}}).appendTo("body")},this.getData=function(){var t=new Date;$.getJSON("../comments.txt?t="+t).then(function(t){for(var e in t)t[e].content.length<200&&o.push(t[e].content);n.add()}),$("#toggleBullet").text("关闭弹幕").removeClass("closed")},this.add=function(){for(var a="",s=0;s<o.length;s++)a+="<p class='bullet' style='color:"+e()+";font-size:"+t(12,18)+"px;top:"+t(50,700)+"px'>"+o[s]+"</p>";l.html(a).show(),n.fly()},this.fly=function(){l.find(".bullet").each(function(){var e=$(this),n=t(10,1e4);setTimeout(function(){e.addClass("fly")},n)})},this.close=function(){l.empty().hide(),$("#toggleBullet").text("开启弹幕").addClass("closed")}},bulletscreen=new Bulletscreen;bulletscreen.init();